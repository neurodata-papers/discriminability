<!DOCTYPE html>
<html>
  <head>

    <link rel="stylesheet" href="http://jovo.me/fonts/gentona/gentona.css">
    <link rel="stylesheet" href="http://jovo.me/fonts/titling-gothic/titling-gothic.css">
    <link rel="stylesheet" href="http://jovo.me/fonts/quadon/quadon.css">
    <link rel="stylesheet" href="http://jovo.me/fonts/arnhem/arnhem.css">


    <title>Discriminability</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">

      body {
        font-family: 'gentona'; /* Varela Round */
        font-size: 1.0em;
      }
      h1, h2, h3, h4, h5, h6 {
        font-family: 'quadon';
        font-weight: 400;
        margin-bottom: 0;
        color: #a6bcd7;
        text-align: center;
        /*text-shadow: 2px 2px gray; /*#ff0000;*/*/
      }

      .remark-slide-content {
        font-size: 1.5em;
        background: #28282e;
        background: radial-gradient(circle, #28282e, #15120e, black); /* Standard syntax */
        background: -webkit-radial-gradient(circle, #28282e, #15120e, black); /* Safari */
        background: -o-radial-gradient(circle, #28282e, #15120e, black); /* Opera 11.6 to 12.0 */
        background: -moz-radial-gradient(circle, #272822, #15120e, black); /* Firefox 3.6 to 15 */
        background: radial-gradient(circle, #28282e, #15120e, black); /* Standard syntax */

        color: #dfd6c2;
      }

      .remark-slide-content h1 { font-size: 3em; }
      .remark-slide-content h2 { font-size: 2em; }
      .remark-slide-content h3 { font-size: 1.6em; }
      .remark-slide-content h4 { font-size: 1.4em; }
      .remark-slide-content h5 { font-size: 1.2em; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }

      .navbar {
        position: absolute;
        float: center;
        top: 0em;
        font-family: 'titling-gothic';  /* Yanone Kaffeesatz */
        font-weight: 200;
        color: #A7A7A7;
      }
      .navbar a {
        color: #A7A7A7;
      }
      .bbar {
        position: absolute;
        bottom: 13px;
        left: 13px;
        font-family: 'titling-gothic';  /* Yanone Kaffeesatz */
        font-weight: 200;
        color: #A7A7A7;
      }
      .bbar a {
        color: #A7A7A7;
      }
      .cbar {
        position: absolute;
        bottom: 13px;
        left: 13px;
        font-family: 'titling-gothic';  /* Yanone Kaffeesatz */
        font-weight: 200;
        /*color: #A7A7A7;*/
        color: #bdbcbc;
      }
      .cbar a{
       color: #bdbcbc;
      }

      .btn {
        background: #424242;
        height: 2em;
      }
      li p { line-height: 1.25em; }
      .r { color: #fa0000; }
      .w {color: white;}
      .ye { color: #FFFF00; }
      .y { color: #fcfaf6; }
      .pink { color: #FF87F3;}
      .orange { color: #FFA500;}
      .g { color: #00CC00; }
      .s {color :#318dde;}
      .blue { color: #75E9FF;}
      .purple { color: #A149A9;}
      .large { font-size: 2em; }
      .black { color: black; background-color: white;}
      a, a > code {
        color:#318dde;
        text-decoration: none; /*underline*/
      }

      a:hover {
        color: white;
      }


      code {
        background: #424242;
        border-radius: 5px;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-code-line-highlighted     { background-color: #373832; }
/*      .pull-left {
        float: left;
        width: 47%;
      }*/
      .pull-left {
        float: left;
        width: 47%;
      }
      .pull-right {
        float: right;
        width: 47%;
      }
      .center {
        margin: auto;
        width: 100%;
        padding: 10px;
      }
      .small {
        font-size: 0.8em;
      }
/*      .pull-right {
        float: right;
        width: 47%;
      }*/
      .pull-bottom {
        position: absolute;
        bottom: 0;
      }
      .bottom {
        position: absolute;
        bottom: 35px;
        left: 13px;
        font-family: 'Yanone Kaffeesatz';
      }
      .pull-right ~ p {
        clear: both;
      }
      #slideshow .slide .content code {
        font-size: 0.8em;
      }
      #slideshow .slide .content pre code {
        font-size: 0.9em;
        padding: 15px;
      }
      .inverse {
        background: white;
        color: white;
        text-shadow: 0 0 20px #333;
      }
      .inverse p {
        color: white;
      }
      .inverse h1, .inverse h2 {
        color: #f3f3f3;
        line-height: 0.8em;
      }
      #frame { zoom: 0.75; -moz-transform: scale(0.75); -moz-transform-origin: 0 0; }

      #outer {
        width: 100%;
        text-align: center;
      }
      #inner {
        display: inline-block;
      }

      /* Slide-specific styling */
      #slide-inverse .footnote {
        bottom: 12px;
        left: 20px;
      }
      #slide-how .slides {
        font-size: 0.9em;
        position: absolute;
        top:  151px;
        right: 140px;
      }
      #slide-how .slides h3 {
        margin-top: 0.2em;
      }
      #slide-how .slides .first, #slide-how .slides .second {
        padding: 1px 20px;
        height: 90px;
        width: 120px;
        -moz-box-shadow: 0 0 10px #777;
        -webkit-box-shadow: 0 0 10px #777;
        box-shadow: 0 0 10px #777;
      }
      #slide-how .slides .first {
        background: #fff;
        position: absolute;
        top: 20%;
        left: 20%;
        z-index: 1;
      }
      #slide-how .slides .second {
        position: relative;
        background: #fff;
        z-index: 0;
      }

      /* Two-column layout */
      .left-column {
        color: #777;
        width: 20%;
        height: 92%;
        float: left;
      }
      .left-column h2:last-of-type, .left-column h3:last-child {
        color: #000;
      }
      .right-column {
        width: 75%;
        float: right;
        padding-top: 1em;
      }
      br {
        line-height: 50%;
      }
      .task {
        float: right;
        font-size: 0.9em;
        padding-top: 0.6em;
      }
      .center
      {
      text-align:center;
      display:block;
      }

  }
    </style>
  </head>
  <body onload="var slideshow = remark.create();">
    <textarea id="source">



class: center, middle

name:opening

## Optimal Decisions for Discovery Science

<br>
<br>

Shangsi Wang,  Greg Kiar,  Eric Bridgeford, Zhi Yang, Xi-Nian Zuo, Michael Milham, Cameron Craddock,  William Gray Roncal,Consortium for Reliability and Reproducibility,  Carey E Priebe,  [Joshua T Vogelstein](mailto:jovo@jhu.edu)

<br>
<br>

these slides: <http://docs.neurodata.io/discriminability>



---

### Decision making is key 

<br><br>


1. which scanner?
2. which sequence?
3. which algorithms?

--

<br>

#### All impact bias and variance for downstream inference


---

### Statistical Decision Theory

<br><br>

Given predictors X, and a desire to predict Y with minimal error, 

we seek the function f  that satisfies

<center><img src="slide-images/sdt.png" style="height: 60px;"/></center>



--

Note, expectation is with respect to the *joint* distribution of x and y



---


#### Limitations of Statistical Decision Theory

<br><br>


1. must specify Y and loss function (e.g. || . ||)
2. requires knowing or estimating the joint distribution P(X,Y), which can be very high dimensional


--

<br><br>


In **reference datasets**, the predictors might be used for a wide variety of inference tasks! 

---


## Goal

<br><br>

Devise a statistical framework for guiding decision making with the following properties:

1. does not require knowing Y a priori
2. does not make any parametric assumptions
3. can operate on any kind of data, vectors, images, graphs,  etc.
4. has strong theoretical support
5. simulations reify theoretical claims
7. works as expected in real data applications
6. is statistically and computationall efficient


---

## Discriminability

<br><br>

Assume we have M measurements from each of S subjects.

<!-- How frequently are multiple measurements from the same subject more similar to one another than they are to measurements from other subjects. -->


How frequent are within-subject differences smaller than between-subject differences?

Let x<sup>s</sup><sub>m</sub> denote the m-th measurement of subject s


<img src="slide-images/ditt.png" style="height: 160px;"/>


<!-- \hat{d}(s,m,m')&=\frac{1}{M(S-1)} \sum_{s' \neq s}^S \sum_{m''=1}^M  \mathbb{I} \{ \delta(x^s_m, x^s_{m'}) < \delta(x^s_m, x^{s'}_{m''})   \} \\
\hat{d}&=\frac{1}{SM(S-1)} \sum_{s=1}^S \sum_{m=1}^M  \sum_{m'=1}^M  \hat{d}(s,m,m')-->

---

### Why We Want Discriminability


<br><br>

Assume the following generative model for each subject:

- z is the true  property of subject
- x is the noisily measured and processed predictor
- y is a thing we want to predict 


<!-- - z ~ f_z 
- x = g(z) 
- y = f(x)
 -->

To ensure our prediction of y is *stable*/*reproducible*, so should our estimate of x

In other words, the more *discriminable* x is, the more we can trust its predictions


---

#### Discriminability Bounds

<br><br>

- d = 0.5 
<!-- multiple measurements of subject s are **no** more similar to one another as they are to other subjects' measurements -->
- subject level predictions will be at chance, .s[regardless of y]


--


<br><br>

- d = 1
<!-- multiple measurements of subject s are **always** more similar to one another as they are to other subjects' measurements -->
- subject level predictions can be optimal, .s[regardless of y]





---

### Theoretical Bounds

<br><br>

Theorem 1: Discriminability of x=g(z) bounds the best possible performance .s[regardless of y] (under suitable assumptions)

<br>

<center><img src="slide-images/bound.png" style="height: 120px;"/></center>


---

### Making Decisions

<br><br>

Corollary 1: If x is more discriminable than x', and its best predictive accuracy is better than possible for x', then it has a better bound

<br>

<center><img src="slide-images/comp.png" style="height: 40px;"/></center>


---

#### Discriminability Finds Optimal Projection


<center><img src="https://github.com/neurodata/discriminability/raw/master/Figs/simu2.png" style="width: 700px;"/></center>


---

####  Discriminability Finds Optimal Threshold

<br>

<center><img src="https://github.com/neurodata/discriminability/raw/master/Figs/HCP_100.png" style="width: 700px;"/></center>


---

####  Discriminability Makes Optimal Decisions

<br>

<center><img src="https://github.com/neurodata/discriminability/raw/master/Figs/mri_decs.png" style="width: 700px;"/></center>


---

####  Discriminability Finds Optimal Pipeline

<br>

<center><img src="https://github.com/neurodata/discriminability/raw/master/Figs/fmri_rank_pv.png" style="width: 700px;"/></center>


---

####  Discriminability for DTI Data

<br>

<center><img src="https://github.com/neurodata/discriminability/raw/master/Figs/comb_dti.png" style="width: 700px;"/></center>


---

### Reproducability Recommendations

<br><br>

1. open data
2. data stored in standard specifications
3. open source code
4. code documented sufficiently to run
5. software dependencies
6. hardware dependencies


---

### How we did it


<br><br>

1. all the data we used in this work is [open data](http://fcon_1000.projects.nitrc.org/indi/CoRR/html/samples.html)
2. we organized our data into [BIDS standard](http://bids.neuroimaging.io/)
3. our [pipeline](https://github.com/neurodata/ndmg) and [discriminability](https://github.com/neurodata/discriminability) code are open source
4. tutorials for [running pipeline](http://docs.neurodata.io/nddocs/mrgraphs/tutorials.html)
5. pipeline in [docker container](https://hub.docker.com/u/bids/)
6. that has been tested already on mac, ubuntu, and using singularity
7. all data derivatives are saved back to the original bucket

---
class: middle, center


<br>

<center><img src="slide-images/bids.png" style="width: 800px;"/></center>


---
class:   middle, center


# Questions?


<br>
<br>


e: [jovo@neurodata.io](mailto:jovo@neurodata.io)

w: [brainx.io](http://brainx.io)

a: DARPA SIMPLEX

---


    </textarea>
    <script src="http://jovo.me/remark-latest.min.js" type="text/javascript">
    </script>
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript"></script>
    <script type="text/javascript">
      var slideshow = remark.create();

      // Setup MathJax
      MathJax.Hub.Config({
          tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
          }
      });
      MathJax.Hub.Queue(function() {
          $(MathJax.Hub.getAllJax()).map(function(index, elem) {
              return(elem.SourceElement());
          }).parent().addClass('has-jax');
      });

      MathJax.Hub.Configured();

var slideshow = remark.create({
  // Set the slideshow display ratio
  // Default: '4:3'
  // Alternatives: '16:9', ...
  ratio: '4:3',

  // Navigation options
  navigation: {
    // Enable or disable navigating using scroll
    // Default: true
    // Alternatives: false
    scroll: true,

    // Enable or disable navigation using touch
    // Default: true
    // Alternatives: false
    touch: true,

    // Enable or disable navigation using click
    // Default: false
    // Alternatives: true
    click: false
  },

  // Customize slide number label, either using a format string..
  // slideNumberFormat: 'Slide %current% of %total%',
  // .. or by using a format function
  slideNumberFormat: function (current, total) {
    return  current + ' of ' + total;
  },

  // Enable or disable counting of incremental slides in the slide counting
  countIncrementalSlides: false
});

    </script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
  </body>
</html>
